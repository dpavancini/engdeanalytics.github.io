
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Capítulo 16 - DataOps: Engenharia de software para dados &#8212; Engenharia de Analytics</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Capítulo 17 - MAS na prática com Postgres, Airbyte, dbt e Metabase" href="../17/intro.html" />
    <link rel="prev" title="Alternativas de Arquitetura de ETL/ELT" href="../15/01/arquiteturas_transformacao.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XDLZWNXBSG"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-XDLZWNXBSG');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo_livro.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Engenharia de Analytics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Engenharia de Analytics
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fundamentos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/intro.html">
   Capítulo 1 - Introdução
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/01/por_que_analytics.html">
     1.1 Por quê Engenharia de Analytics?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/02/carreiras_atuais.html">
     1.2 Redefinindo equipes de Dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/03/responsabilidades.html">
     1.3 As responsabilidades do Engenheiro de Analytics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/04/northwind.html">
     1.4 Estudo de caso: Northwind Traders
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/05/para_quem.html">
     1.5 Para quem é este livro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/06/como_organizado.html">
     1.6 Como este livro está organizado
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/intro.html">
   Capítulo 2 - Fundamentos de Analytics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/01/5_vs.html">
     2.1 Os 5 Vs do big data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/02/volume.html">
     2.2 Volume
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/03/velocidade.html">
     2.3 Velocidade
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/04/variedade.html">
     2.4 Variedade
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/05/veracidade.html">
     2.5 Veracidade
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/06/valor.html">
     2.6 Valor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/intro.html">
   Capítulo 3 - Pensando de forma analítica
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/01/pensamento_analitico.html">
     3.1 O pensamento analítico
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/02/tecnicas_problemas.html">
     3.2 Técnicas para resolução de problemas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/03/pareto.html">
     Diagrama de Pareto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/04/5_porques.html">
     Os 5 porquês
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/intro.html">
   Capítulo 4 - Bancos de dados
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/01/tipos_de_bd.html">
     4.1 Tipos de Bancos de Dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/02/tipos_de_dados.html">
     4.2 Tipos de Dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/03/modelo_relacional.html">
     4.3 Modelo Relacional
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/04/indices.html">
     4.4 Trabalhando com índices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/05/modelagem_bd.html">
     4.5 Modelagem de Banco de Dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/06/normalizacao.html">
     4.6 ER e Normalização de dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/07/dimensional.html">
     4.7 O modelo dimensional e o esquema estrela
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/08/outros_modelos.html">
     4.8 Outras classificações de modelagem de bancos de dados
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/09/planilhas_bd.html">
     4.9 Planilhas vs Bancos de Dados SQL: Quais as diferenças?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/intro.html">
   Capítulo 5 - SQL para Análise de Dados
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/01/select.html">
     5.1 Consultando dados com SELECT, WHERE e ORDER BY
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/02/join.html">
     5.2 Juntando dados com JOIN e UNION
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/03/agregadas.html">
     5.3 Funções Agregadas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/04/group_by.html">
     Trabalhando com agrupamentos GROUP BY
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/05/case_when.html">
     5.5 Lógica condicional com  CASE WHEN
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/06/sub.html">
     Subqueries e CTE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/intro.html">
   Capítulo 6 -  Boas práticas de programação
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07/intro.html">
   Capítulo 7 -  A Infraestrutura Moderna de Analytics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modelando Dados
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08/intro.html">
   Capítulo 8 - Data Warehouses
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/01/papel_mas_dw.html">
     6.1 O papel do Data Warehouse no Modern Analytics Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/02/modelagem_dimensional.html">
     6.2 O Modelo dimensional
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/03/esquema_estrela.html">
     6.3 O esquema estrela
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/04/arquiteturas_dw.html">
     6.4 Arquiteturas de Data Warehouse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09/intro.html">
   Capítulo 9 - Fatos
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/01/medidas.html">
     Tipos de Medidas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/02/tipos_fato.html">
     Tipos de Tabelas Fato
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../10/intro.html">
   Capítulo 10 - Dimensões
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/01/chaves.html">
     7.1 Tipo de Chaves
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/02/scd.html">
     7.2 Dimensão de Alteração Lenta  (SCD)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/03/degeneradas.html">
     7.3 Dimensões degeneradas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/04/junk.html">
     7.4 Dimensões Junk
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/leia_mais.html">
     Leia Mais
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../11/intro.html">
   Capítulo 11 -  Modelando um Data Warehouse
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/01/etapas.html">
     9.1 Etapas de Modelagem do DW
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/02/planejando_marts.html">
     9.2 Planejando os Data Marts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/03/planejando_dimensoes.html">
     9.3 Planejando as dimensões
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/04/criando_modelos.html">
     9.4 Criando os modelos conceituais
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/05/mapeamento_chaves.html">
     9.5 Mapeamento de Chaves
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/06/tabela_fato.html">
     9.6 Modelando a Tabela Fato
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/07/agregadas_derivadas.html">
     9.7 Tabelas Agregadas e Derivadas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12/intro.html">
   Capítulo 12 -  Configurando um Data Warehouse com Big Query
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Transformando dados
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../13/intro.html">
   Capítulo 13 -  Introdução ao ETL e ELT
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../14/intro.html">
   Capítulo 14 -  Ingestão de dados
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../15/intro.html">
   Capítulo 15 -  Transformação de dados
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/01/arquiteturas_transformacao.html">
     Alternativas de Arquitetura de ETL/ELT
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Capítulo 16 - DataOps: Engenharia de software para dados
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tópicos Adicionais
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../17/intro.html">
   Capítulo 17 - MAS na prática com Postgres, Airbyte, dbt e Metabase
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../18/intro.html">
   Capítulo 18 - Tópicos adicionais
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/01/etl_vs_elt.html">
     ETL vs ETL
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/dpavancini/eng-de-analytics-livro"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/dpavancini/eng-de-analytics-livro/issues/new?title=Issue%20on%20page%20%2Fchapters/16/intro.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/chapters/16/intro.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aplicando-praticas-de-dataops-com-o-dbt">
   Aplicando práticas de DataOps com o dbt
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#escrevendo-testes">
   Escrevendo testes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentando-o-modelo-de-dados-e-visualizando-as-dependencias">
   Documentando o modelo de dados e visualizando as dependências
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Capítulo 16 - DataOps: Engenharia de software para dados</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aplicando-praticas-de-dataops-com-o-dbt">
   Aplicando práticas de DataOps com o dbt
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#escrevendo-testes">
   Escrevendo testes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentando-o-modelo-de-dados-e-visualizando-as-dependencias">
   Documentando o modelo de dados e visualizando as dependências
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="capitulo-16-dataops-engenharia-de-software-para-dados">
<span id="data-ops"></span><h1>Capítulo 16 - DataOps: Engenharia de software para dados<a class="headerlink" href="#capitulo-16-dataops-engenharia-de-software-para-dados" title="Permalink to this headline">#</a></h1>
<p>Um conceito essencial do desenvolvimento de software é a separação do ambiente final do sistema que os clientes e usuários tem acesso, o ambiente “produção”, do ambiente onde novas funcionalidades e código é desenvolvido, o ambiente de desenvolvimento. Em analytics, por outro lado, tradicionalmente alterações são feitas diretamente nas ferramentas utilizadas para geração de análises, causando problemas frequentes. A evolução de uma aplicação segue então um processo com etapas bem definidas e isoladas entre si de forma a evitar que erros e bugs passem para a aplicação final:</p>
<ul class="simple">
<li><p>Desenvolvimento (develop): criar e modificar código de uma aplicação;</p></li>
<li><p>Montar (Build): montar os componentes de uma aplicação;</p></li>
<li><p>Testar (test): testar e verificar dentro de um ambiente teste;</p></li>
<li><p>Deploy: mover o código para o ambiente de “produção”</p></li>
<li><p>Executar (run): executar a aplicação</p></li>
</ul>
<p>Mais recentemente, uma parte deste processo passou a ser automatizada ao que deu-se o nome de DevOps (DEVelopment + OperationS). O Build e test de novos códigos em um ambiente de desenvolvimento é feito automaticamente pelo CI (continuous integration). Quando aprovado, as alterações são também integradas automaticamente no ambiente produção através do CD (continuous deployment). Através desta abordagem empresas como Amazon e Google conseguem realizar o deploy de alterações em serviços em questões de segundos e com segurança.</p>
<p>Um desenvolvedor geralmente utiliza softwares facilitadores chamados de IDE (do inglês Integrated Development Environment ou Ambiente de Desenvolvimento Integrado) a exemplo do <a class="reference external" href="https://visualstudio.microsoft.com/pt-br/downloads/">Visual Studio</a>, Atom ou PyCharm. O código fonte de cada aplicação é salvo em pastas especiais chamadas de sistemas de versionamento de código, que guardam a história de cada alteração nos arquivos. Essas pastas são sincronizadas com um repositório online que permite que cada desenvolvedor trabalhe de forma isolada sem gerar conflitos entre si. O mais famoso desses repositórios é o github, que utiliza um sistema chamado git.</p>
<p>Ao iniciar uma nova funcionalidade, cada desenvolvedor faz uma cópia do código-fonte e cria uma nova branch (do inglês, galho). Cada nova alteração ou conjunto de alterações são persistidas nessa branch no momento em que nós fazemos um commit, onde incluímos uma mensagem explicando quais alterações realizamos. Quando nos sentimos confortáveis com nosso trabalho, enviamos esses arquivos para o repositório online (através do git push) e  pedimos para juntar essas alterações à branch principal, geralmente chamada master. Esse pedido é chamado de Pull Request ( ou simplesmente, PR), que é revisado e aprovado (ou não) por outras pessoas na equipe. Antes de juntarmos o código, processo chamado de merge, as ferramentas de git verificam se há conflitos do nosso trabalho com o de outras pessoas. Em alguns casos, testes automatizados também são rodados para ter mais uma camada de verificação. O uso de versionamento de código e testes é um dos pilares do DevOps e também do DataOps, a aplicação de DevOps para analytics.</p>
<blockquote>
<div><p><strong>Para saber mais</strong>
Para quem é iniciante em Git, há diversos tutoriais sobre o assunto como <a class="reference external" href="https://www.atlassian.com/br/git/tutorials/what-is-version-control">este</a>. Também existem diversos workflows possíveis para trabalhar com Git, entre os mais populares está o Git Flow. Se você quiser aprender mais, pode ler esse artigo no <a class="reference external" href="https://blog.ateliedocodigo.com.br/fluxo-de-versionamento-de-software-com-git-flow-b9f5195c679e">Medium</a> ou  <a class="reference external" href="https://www.atlassian.com/br/git/tutorials/comparing-workflows/gitflow-workflow">aqui</a>.
{.is-info}</p>
</div></blockquote>
<p>Quando trabalhamos com dados, entretanto, não basta que o código esteja correto, mas precisamos que os dados também façam sentido. Para isso, precisamos adicionar testes de dados e de schema ao nosso processo. Para isso podemos utilizar funcionalidades de ferramentas como o <span class="xref myst">dbt</span> ou mesmo ferramentas específicas como o <a class="reference external" href="https://greatexpectations.io/">great_expectations</a>. Abaixo apresentamos exemplos destes dois tipos de testes:</p>
<p><strong>Testes de schema:</strong></p>
<ul class="simple">
<li><p>A fonte de dados tem as colunas certas?</p></li>
<li><p>A coluna tem o tipo certo?</p></li>
<li><p>Tem valores nulos?</p></li>
<li><p>Temos todas as tabelas?</p></li>
</ul>
<p><strong>Testes de dados:</strong></p>
<ul class="simple">
<li><p>A tabela “Vendas” tem pelo menos 500 linhas?</p></li>
<li><p>Clientes tem no máximo 1000 linhas?</p></li>
<li><p>A soma de pedidos no mês 05 é 1456?.</p></li>
</ul>
<p>Como os dados se alteram continuamente, diferente do código de uma aplicação, também precisamos isolar nosso ambiente de desenvolvimento e produção de forma metódica. No ambiente de desenvolvimento, queremos isolar nossos testes nas lógicas de negócio e no código e evitar alterações externas no ambiente. Por isso, congelamos os dados e trabalhamos com uma amostra de dados que não se altera. Já no ambiente de produção, nosso objetivo é testar continuamente se os dados estão dentro dos limites que desejamos.</p>
<p>No ambiente de desenvolvimento, alteramos os modelos de dados, regras de negócio, fontes de dados, etc. para os requisitos necessários. Também testamos continuamente o código e as lógicas para garantir que não ocorra uma duplicação de dados, um JOIN errado, etc. Também podemos visualizar os dados gerados em um ambiente de visualização teste.  Quando o código estiver aprovado e estivermos confiantes que as alterações no pipeline estão consistentes, o pipeline em produção passa a utilizar o novo código de transformação em cima dos dados atualizados. Assim garantimos que durante todo o desenvolvimento os dados que o “consumidor final” recebe é consistente e atualizado e novas alterações são quase imperceptíveis. Um verdadeiro desenvolvimento de software.. só que de Analytics.</p>
<section id="aplicando-praticas-de-dataops-com-o-dbt">
<h2>Aplicando práticas de DataOps com o dbt<a class="headerlink" href="#aplicando-praticas-de-dataops-com-o-dbt" title="Permalink to this headline">#</a></h2>
</section>
<section id="escrevendo-testes">
<h2>Escrevendo testes<a class="headerlink" href="#escrevendo-testes" title="Permalink to this headline">#</a></h2>
<p>Garantir a integridade dos dados na transformação  é parte essencial de qualquer projeto de ETL e o dbt foi pensando com as melhores práticas de engenharia de software em mente, em especial a capacidade de escrever testes sobre os dados de forma direta e consistente.</p>
<p>Quanto mais cedo incluirmos testes no processo de ETL, mais fácil será a validação dos modelos finais com o cliente. É por isso que recomendamos inverter o processo e escrever testes antes mesmo de escrever os modelos.</p>
<p>Conceitualmente, há dois tipos de <a class="reference external" href="https://docs.getdbt.com/docs/building-a-dbt-project/tests">testes</a> no dbt:</p>
<ul class="simple">
<li><p><strong>testes genéricos (antigos testes de schema)</strong>: são definidos em um arquivo .yaml e permitem realizar testes gerais sobre colunas da tabela, tais como: unicidade, não-nulicidade, valores dentro de uma lista pré definida, relacionamentos, entre outros. O teste falha quando há algum registro que não passa em um teste específico . Ex. há um registro duplicado em uma coluna com teste de unicidade.</p></li>
<li><p><strong>testes singulares (testes de dados)</strong>: são consultas sql que devem retornar 0 linhas para passarem no teste. Geralmente são testes baseados em dados validados com o cliente e de grande importância para garantir que os modelos estão gerando resultados consistentes.</p></li>
</ul>
<p>De forma geral, devemos incluir ao menos um testes genérico para cada modelo na sua chave primária (surrogate ou natural). Por exemplo, para garantir que não tenhamos nenhum cliente repetido na tabela de clientes, vamos criar um arquivo <code class="docutils literal notranslate"><span class="pre">dim_customers.yml</span></code> e incluir dois testes para a chave sk:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w"> </span>
<span class="nt">models</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_customers</span><span class="w"></span>
<span class="w">   </span><span class="nt">columns</span><span class="p">:</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_sk</span><span class="w"></span>
<span class="w">       </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The primary key of the customer</span><span class="w"></span>
<span class="w">       </span><span class="nt">tests</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unique</span><span class="w"></span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span><span class="w"></span>
</pre></div>
</div>
<p>Para entender como os testes funcionam na prática, precisamos rodar o comando <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">run</span></code>  no terminal. Ao fazê-lo, o dbt converte os testes em consultas SQL apropriadas e retorna o resultado (sucesso ou falha) de forma similar a um modelo:</p>
<!-- ![cap11-figura6.png](/engenharia-analytics-intro/cap11/cap11-figura6.png)
**Figura 11.6. Exemplo de sucessos nos testes** -->
<p>Vemos que nossa tabela de dimensão clientes não possui nenhum registro repetido ou nulo na coluna customer_sk. Mas e se fizermos o mesmo teste para a coluna order_id na tabela de pedidos? o que esperamos encontrar? Lembremos que optamos por juntar na tabela de fatos a tabela de itens por pedido, de modo que podemos ter múltiplas linhas para cada pedido. Ao rodar um teste de unicidade para o id do pedido (order_id), esperamos que esse teste falhe e é exatamente isso que acontece. Vemos que o dbt encontrou 693 linhas repetidas quando esperávamos nenhuma:</p>
<!-- ![cap11-figura7.png](/engenharia-analytics-intro/cap11/cap11-figura7.png)
**Figura 11.7. Neste caso ocorreu uma falha em um teste** -->
<p>É comum que durante o processo de modelagem aconteçam transformações que porventura dupliquem registros que deveriam ser únicos (um join equivocado por exemplo) ou que possivelmente existam regras de negócio que não sabíamos de antemão. Para esses casos, escrever testes de forma consistente facilita muito o trabalho de validação e desenvolvimento dos modelos com segurança. Além de unicidade e não-nulidade, outros testes de schemas comuns a serem incluídos nos modelos são:</p>
<ul class="simple">
<li><p><strong>Teste de relacionamento (relationship)</strong>: os testes de relacionamento servem para garantir relacionamentos entre colunas de modelos distintos, similar ao comportamento de chaves estrangeiras no banco transacional. Geralmente é utilizado para mapear chaves de dimensões dentro das tabelas fato.</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w"> </span>
<span class="nt">models</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fct_order_detail</span><span class="w"></span>
<span class="w">   </span><span class="nt">columns</span><span class="p">:</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">employee_fk</span><span class="w"></span>
<span class="w">       </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The foreign key to the employees dimension table</span><span class="w"></span>
<span class="w">       </span><span class="nt">tests</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">relationships</span><span class="p">:</span><span class="w"></span>
<span class="w">               </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ref(&#39;dim_customers&#39;)</span><span class="w"></span>
<span class="w">               </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;customer_sk&#39;</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Teste de valores aceitos (accepted_values)</strong>: esse tipo de teste serve para garantir que os valores de uma coluna estejam em um intervalo pré-definido. Por exemplo, em uma coluna de status de pedido.</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w"> </span>
<span class="nt">models</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_products</span><span class="w"></span>
<span class="w">   </span><span class="nt">columns</span><span class="p">:</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_discontinued</span><span class="w"></span>
<span class="w">       </span><span class="nt">tests</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">accepted_values</span><span class="p">:</span><span class="w"></span>
<span class="w">               </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;No&#39;</span><span class="p p-Indicator">,</span><span class="s">&#39;Yes&#39;</span><span class="p p-Indicator">]</span><span class="w"></span>
</pre></div>
</div>
<p>Na maioria dos casos, a grande dificuldade no processo de modelagem de dados é garantir que indicadores e resultados sejam os mesmos (ou próximos) dos considerados ‘verdadeiros’ pelo cliente.  Não raramente o próprio cliente não tem uma visão clara dos passos necessários, fontes de dados e regras de negócios que são aplicadas antes da geração de um indicador em um relatório ou planilha de Excel e é o trabalho do analytics engineer trabalhar de forma integrada com o cliente para extrair essas informações e aplicar no processo de modelagem. Para facilitar esse trabalho podemos utilizar os testes de dados. isto é, consultas SQL arbitrárias em cima dos modelos que garantem que nossos modelos cheguem no resultado desejado. Para evitar outros problemas como dados mutáveis, atraso no ETL etc, o ideal é sempre fixarmos um período retroativo onde temos confiança que os dados não irão se alterar.</p>
<p>Como exemplo, queremos validar a quantidade de itens em pedidos da nossa tabela de fatos de pedidos (<code class="docutils literal notranslate"><span class="pre">fct_order_detail</span></code>). Para isso, vamos fazer uma consulta nos dados originais e fixar os pedidos criados em março de 1998 como período de validação. Podemos gerar a consulta diretamente em SQL e logo obtemos uma quantidade de 4065 unidades vendidas.</p>
<p>Após hipoteticamente confirmarmos com a Northwind que esse número é consistente, podemos utilizar como validação em nosso teste de dados <code class="docutils literal notranslate"><span class="pre">sum_quantity_march_1998.sql</span></code>. Notamos que a sintaxe do teste é muito próxima de um modelo mas que devemos escrever nossa consulta final como se quiséssemos que ele “desse errado”, isto é, queremos retornar todas as linhas onde o teste não passa ao rodar o dbt test,  e o sucesso no teste ocorre quando o resultado da consulta é vazio.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span>* If sum of quantity in March-1998 is not 4065, throws an error */
 
with
   sum_quantity as (
       SELECT
           sum(quantity) as cnt
       FROM {{ ref (&#39;fct_order_detail&#39;) }}
       where order_date
       between &#39;1998-03-01&#39; and &#39;1998-03-31&#39;
   )
 
select * from sum_quantity where cnt != 4065
</pre></div>
</div>
<p>Ao combinarmos o uso de testes genéricos e singulares desde o início do projeto, garantimos a consistência e integridade do ETL mesmo em projetos com centenas de modelos.</p>
</section>
<section id="documentando-o-modelo-de-dados-e-visualizando-as-dependencias">
<h2>Documentando o modelo de dados e visualizando as dependências<a class="headerlink" href="#documentando-o-modelo-de-dados-e-visualizando-as-dependencias" title="Permalink to this headline">#</a></h2>
<p>A última etapa dentro de um projeto padrão de dbt é a documentação dos modelos e transformações. Essa documentação é feita a partir dos arquivos <code class="docutils literal notranslate"><span class="pre">schema.yml</span></code> que já utilizamos para escrever nossos testes de schema através de campos de descrição de tabelas e colunas. Ao criarmos as descrições, elas são adicionadas com outras informações que o dbt processa de como as fontes, modelos e testes do projeto estão estruturados. No exemplo abaixo documentamos a tabela de dimensão de Produtos e cada uma de suas colunas, de preferência na mesma ordem que no modelo final:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>

<span class="nt">models</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dim_products</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">This is the Products Dimension table. It includes information about Northwind Products.</span><span class="w"></span>
<span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_sk</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The primary key of the product</span><span class="w"></span>
<span class="w">        </span><span class="nt">tests</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unique</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not_null</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_id</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The natural key of the product</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">product_name</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The product name</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">units_in_stock</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The total of units in stock for the given product.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">category_id</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The natural key of the category.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unit_price</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The product unit price.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reorder_level</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The re-order level to avoid stock-outs.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">supplier_id</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The natural key of the supplier.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">units_on_order</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The minimum units on a purchase order.</span><span class="w"></span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_discontinued</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">If the product has been discontinued.</span><span class="w"></span>
<span class="w">        </span><span class="nt">tests</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">accepted_values</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;No&#39;</span><span class="p p-Indicator">,</span><span class="s">&#39;Yes&#39;</span><span class="p p-Indicator">]</span><span class="w"></span>
</pre></div>
</div>
<p>Embora já seja importante para o entendimento dos modelos junto ao código, é quando utilizamos o comando <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">docs</span></code>  que vemos o diferencial de utilizar o dbt nesse quesito. O comando <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">docs</span> <span class="pre">generate</span></code> gera um arquivo de documentação em formato html que conseguimos visualizar de forma interativa no navegador mesmo em projetos complexos, facilitando a colaboração e  compartilhamento da modelagem. A visualização é feita através do <code class="docutils literal notranslate"><span class="pre">dbt</span> <span class="pre">docs</span> <span class="pre">serve</span></code> no terminal:</p>
<!-- ![cap11-figura8.png](/engenharia-analytics-intro/cap11/cap11-figura8.png)
**Figura 11.8. Exemplo de documentação do dbt** -->
<p>Além das descrições, o dbt gera uma árvore de dependências dos modelos que facilita o entendimento do ETL:</p>
<!-- ![cap11-figura9.png](/engenharia-analytics-intro/cap11/cap11-figura9.png)
**Figura 11.8. Exemplo de árvore de dependências do dbt** -->
<p>A documentação conclui as etapas básicas que devem constar de qualquer projeto de transformação de dados em dbt. Vale ressaltar que projetos de ETL raramente são lineares: geralmente passamos por diversas iterações de cada etapa do projeto, desde mapeamento de novas fontes, criação dos modelos, testes e documentação. Depois de validados, ainda precisamos apontar os modelos para um banco de dados em produção que será de fato consultado por uma ferramenta de BI ou outro uso pelo cliente, além de garantir que esse processo todo rode na frequência e horário adequado para os fins do projeto. Na seção de Orquestração de tarefas, abordamos como fazer isso utilizando ferramentas como o Airflow ou Prefect.  Uma outra alternativa é utilizar o serviço do dbt cloud, uma solução SaaS dos criadores do dbt que facilita o deploy de projetos em dbt.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/16"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../15/01/arquiteturas_transformacao.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Alternativas de Arquitetura de ETL/ELT</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../17/intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Capítulo 17 - MAS na prática com Postgres, Airbyte, dbt e Metabase</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Daniel Paulon Avancini<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>